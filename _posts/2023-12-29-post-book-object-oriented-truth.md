---
title: "[Book] 객체지향의 사실과 오해"
excerpt: ""

categories:
  - Book
tags:
  - 객체지향의 사실과 오해
last_modified_at: 2023-12-29T00:00:00
---


# 1. 협력하는 객체들의 공동체(feat. 카페)

- 역할 - 관련된 책임의 집합으로, 여러 객체가 동일한 역할(인터페이스)을 할 수 있고 대체 가능하다.  = 캐시어 or 바리스타
- 책임 - 자유로운 자신만의 방법을  쓰되(다형성), 역할에는 충실해야 한다. = 주문받기 or 커피만들기
- 협력 - 역할에 주어진 책임을 수행하기 위해 도움을 요청(메시지)하고, 받은 요청을 처리(메서드)한 뒤  응답받는 관계 형성.
- 클래스들의 정적인 관계보다 메시지를 주고받는 객체들의 동적인 관계가 중요하다.
- 메시지(인터페이스)와 메서드(구현)을 분리하면 협력하는 객체들 간의 자율성이 올라간다.
- 객체지향은 런타임에 메서드를 선택 할 수 있다는 점이 절차지향 프로그래밍과 다르다.
- 코드를 담는 클래스의 관점에서 메시지를 주고받는 객체의 관점으로 사고의 중심 전환이 필요하다.

<br>

<br>

# 2. 이상한 나라의 객체

- 객체란 현실세계에 존재하는 사물에 대한 추상화이며,  객체지향은 단순 모방이 아니라 새로운 세계를 창조하는 것이다.(현실에서는 사람이 계산하지 주문 객체가 자신을 계산하지 않는다.)
- 객체는 상태, 행동, 식별자를 가진 실체로 설명하는 것이 효과적이다.
- 상태는 노출시키지 않고 메시지를 통해 객체의 행동을 유발하는 캡슐화가 객체의 자율성을 높인다.
- 행동이 상태를 결정한다.
- 책임 주도 설계(Responsibility Dreivent Design, RDD) - 객체의 상태가 아니라 행동을 먼저 생각해하고 설계해야 응집도 높고 재사용 가능한 객체를 만들기 쉽다.
- 의인화 - 소프트웨어 세계에서의 객체는 현실의 객체를 단순히 모방하고 추상화(핵심만 표현) 하는것이 아니라 생명을 가진 존재가 된다.

<br>

<br>

# 3. 타입과 추상화

- 진정한 의미의 추상화란 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질을 드러나게 하는 과정이다.
- 추상화의 두 단계
    - 공통점은 취하고 차이점은 버리는 일반화.
    - 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거함으로써 단순하게 만드는 것.
- 객체가 협력을 위해 어떤 책임을 지녀야 하는지를 결정하는 것이 객제치향 설계의 핵심이다.
- 한 객체가 다른 객체와 동일한 데이터(속성을)를 가지고 있더라도 다른 행동을 한다면 서로 다른 타입이다.
- 객체가 외부에 공개해야 할 행동을 먼저 생각해서 설계하고(Responsibility-Driven Design, RDD), 그 뒤에 데이터를 결정하고 숨겨야(캡슐화) 한다.
- 좀 더 일반적인 타입이 슈퍼타입, 좀더 특수한 타입이 서브타입이다.
- 동적 모델은 실제 애플리케이션 실행 중에 객체들간의 움직임, 정적 모델은 설계할 때의 클래스이다.

<br>

<br>

# 4. 역할, 책임, 협력

- 객체지향 시스템 내에서는 객체들간의 협력을 먼저 정의하고, 그 뒤에 각 객체의 상태와 행위를 고민해야 한다.
- 3가지 객체지향 설계 기법
    - 책임 주도 설계(Responsibility-Driven Design) - 시스템의 책임을 더 작은 책임으로 분할해서 담당할 수 있는 객체/역할을 찾아 책임을 할당하고, 각 객체들은 도움이 필요할 경우 책임질 다른 적절한 객체/역할에 요청하면서 협력함.
    - 디자인 패턴 - 책임 주도 설계의 결과로써 반복해서 해결한 설계법의 역할, 책임, 협력의 템플릿.
    - 테스트 주도 개발 - 실패하는 테스트 작성 → 통과하는 코드 작성(중복가능) → 리팩터링(중복제거) 하는 개발 방법. 책임과 협력의 관점에서 객체를 바라보는 훈련이 되어 있어야 제대로 TDD를 할 수 있음.
- 디자인 패턴을 통해 빠르게 그리고 테스트를 통해 안전하게 책임 주도 설계의 목적지에 도달 할 수 있다.

<br>

<br>

# 5. 책임과 메시지

- 협력 내에서 객체들은 책임을 수행하면서 자율성이 보장되어야 한다.
- 어떻게 어떻게 하라는 세세한 요청은 자율성을 해치고, 너무 추상적인 요청은 의도를 흐리게 된다.
- 자율적인 책임에서 객체는 “어떻게”가 아니라 “무엇을” 해야 하는지 설명한다.
- 메시지는 “무엇을” 실행하길 요청하고 메서드는 “어떻게”를 수행하는데, 이때 메시지를 수신한 객체가 런타임에 메서드를 선택할 수 있다는 것이 객체지향의 특징이다.
- 다형성은 송신자와 수신자 간의 객체 타입(클래스?)에 대한 결합도를 메시지(인터페이스)에 대한 결합도로 낮춤으로써 달성된다.
- What/Who 사이클 - 어떤 행위가 필요한지 결정한 후에 이를 수행할 객체를 결정하는 것.
- 메시지를 먼저 결정함으로써 객체의 인터페이스를 발견할 수 있다는 것이 중요하며, 이것은 TDD의 핵심 아이디어이다.
- 책임의 자율성이 주는 이점
    - “증언하다” 와 같이 적절하게 추상화된 책임은 협력(인터페이스)를 단순하게 함.
    - 외부 관점의 책임(인터페이스)와 내부 수행 방법(메서드)가 구분되는 즉, 인터페이스와 구현이 분리되어 캡슐화됨.
    - 내부 수행 방법을 변경하더라도 외부에 영향을 미치지 않음.
    - 협력의 대상을 다양하게 선택할 수 있는 유연성 제공.
    - 객체의 역할을 이해하기 쉬워지고, 응집도 를 높일 수 있음.

<br>

<br>

# 6. 객체 지도

- 안정적인 재료 - 구조(도메인 모델)
- 불안정한 재료 - 기능(유스케이스)
- 책임 주도 설계는 유스케이스로부터 첫 먼째 메시지와 사용자가 달성하려는 목표를, 도메인 모델로부터 기능을 수용할 수 있는 안정적인 구조를 제공받아 객체들의 협력 공동체를 창조한다.
- “이자율” 객체가 왜 이자를 계산할까? 책임 할당의 기본 원칙은 책임을 수행하는데 필요한 정보를 가진 객체에게 그 책임을 할당하는 것이기 때문이다.
- 도메인 모델을 중심으로 객체 구조를 설계하고 유스케이스의 기능을 객체의 책임으로 분배하면 크게 변경되지 않는 한 기능이 추가된다고 객체간의 관계가 변하지 않는다. 이것이 일반적으로 객체지향이 기능 변경에 유연하게 대응할 수 있는 패러다임이라고 일컬어지는 이유다.

<br>

<br>

# 7. 함께 모으기

- 클래스 설계시 개념(도메인), 명세(인터페이스), 구현(속성, 메서드)의 세가지 관점을 모두 수용하면서 또한 쉽게 식별할 수 있도록 깔끔하게 분리해야 한다.
- 설계로 협력 전체를 완성 할 수 없고, 어느정도 밑그림이 그려지면 테스트 코드를 작성하면서 협력을 완성하라.
- 인터페이스가 수정되면 협력하는 모든 객체에 영향을 미치므로, 인터페이스의 수정이 최대한 발생하지 않도록 구현의 세부사항을 인터페이스에 드러나지 않게 해야 한다.

<br>

<br>

# 부록

- 클래스는 타입을 구현하는 용도중 하나이다.
- 일반화 = 슈퍼타입, 특수화 = 서브타입.
- 서브타이핑 = 서브타입과 슈퍼타입간의 구조적, 행위적 순응관계를 의미하며 대체 가능성 내포.(ex = 인터페이스 or 상속)
- 서브클래싱 = 서브클래스가 슈퍼클래스를 대체할 수 없고 단지 코드만 공유.(ex 상속)