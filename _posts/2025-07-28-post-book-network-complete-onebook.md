---
title: "[Book] 한 권으로 끝내는 네트워크 기초"
excerpt: ""

categories:
  - Book
tags:
  - 네트워크
last_modified_at: 2025-07-28T00:00:00
---


# 2장. 네트워크를 실현하는 기술

- `ARP`(Address Resolution Protocol) : IP주소를 MAC 주소로 변환하는 프로토콜. LAN에서 통신 상대의 MAC 주소를 알아내기 위한 것이며, 상대가 다른 네트워크에 있는 경우에는 라우터가 그 상대가 되어 MAC주소를 알려주고 데이터를 받아 다른 네트워크의 통신 상대를 찾아 전달함.
- `NAT`(Network Address Translation) : 인터넷에 접속 할 때 내부주소로 접속할수 없기에 외부 공인IP주소로 라우터에서 변환해주는 기술이며 IP 주소 절약도 할수 있음.
- `CIDR`(Classless Inter-Domain Routing) : IP주소 범위를 표현하기 위해 프리픽스(서브넷 마스크) 자리수를 표기하는 방식.
- L2 스위치는 MAC 주소를 통해 해당 포트로 전송하는데, 이에 네트워크(IP)를 연결하는 기능을 추가한 것이 L3 스위치(라우터) 이다. L3 스위치는 이더넷을 지원하는 WAN 회선을 수용하지만, 라우터는 WAN 회선 뿐만 아니라 전화 회선, 광 회선 등도 수용 가능하다. 그리고 L3 스위치도 패킷 픽터 기능이 있지만 라우터는 그에더해 송수신 일관성 검사나 위조방지 가능 같은 패킷 체크 기능이 뛰어나다.
- L4(TCP)/L7(세션) 스위치는 로드 밸런서라고도 하며, 요청을 여러 서버에 분산한다. L7 스위치는 특정 서버에 연결을 유지하는 세션 유지 기능이 있다.
- 클라이언트 측에서 사용하는 동적 포트번호 범위는 한 컴퓨터에서 브라우저 2개로 같은 사이트에 접속할때 클라이언트를 구분하기 위해 사용된다.(71p)
- `ICMP`(Internet Control Message Protocol)는 3계층에서 동작하지만 IP위에서 동작하는 프로토콜이다. ping이나 tracert 등이 있으며, 4계층과는 별도로 동작하기에 포트번호를 사용하지 않는다.
- 라우터 수십대가 구성이 변경이 안되는 수준이라면 정적 라우팅을 해도 되지만, 수천수만대의 라우터로 구성되고 구성이 자주 바뀐다면 현실적으로 동적 라우팅이 필요하다.

# 3장. 웹을 구현하는 기술

- SSL(Secure Sockets Layer)을 계승받은 TLS(Transport Layer Security)는 암호화를 통해 인터넷 통신을 제삼자가 훔쳐보거나 조작하지 못하게 하는 기술이다.
- SSL/TLS 인증서 종류
    - 도메인 인증(DV) - 도메인 및 도메인 소유자를 제외하고 도메인 자체만 확인해서 발급.
    - 기업 인증(OV) - 도메인과 더불어 웹사이트를 운영하는 조직의 실재성을 인증. 신용카드나 개인정보 등의 민감정보를 주고받는 웹사이트에 사용.
    - EV 인증 - 기업의 실재성과 더불어 소재지까지 인증. 온라인 뱅킹 및 금융기관과 연결되는 웹사이트에 사용.
- CGI(Common Gateway Interface)
    - 웹 서버는 클라이언트의 CGI 스크립트를 인식해서 OS에서 실행하고, 필요에 따라 DB와 연동하여 결과를 반환.
    - 인터페이스 표준이기 때문에 Python, Perl, C, C++, Shell 스크립트 등 다양한 언어로 작성 가능.
- URL(Uniform Resource Locator)
    - 스킴(프로토콜 + ://) + 주소(192.168.0.2) + 디렉터리 + 파일이름 으로 구성됨
- DNS
    - 스킴 + 호스트(www) + 도메인(example.com) + 디렉터리 + 파일이름
    - 실제 데이터를 가진 콘텐츠 DNS 서버와 콘텐츠 DNS 서버에 질의해서 응답하는 캐시 DNS 서버로 구성됨.
- 도메인 관리 조직 구조
    - 세계적인 비영리 기관 ICANN.
    - ICANN 산하의 레지스트리(각국 .kr등 관리 기관인 NIC 또는 .com, .net등의 기관)가 있고 각 도메인 정보의 데이터베이스 관리.
    - 레지스트리에 있는 DB에 도메인이 등록되도록 중개, 직접 등록하는 레지스트라.
    - 레지스트라 산하의 대리점.
- 도메인의 종류
    - gTLD(generic Top Level Domain) - .com, .net, .org, .edu, .gov 등등을 다루며 레지스트리는 Verisign. 국내 인증 레지스트라는 가비아, 예스닉, 후이즈 등.
    - ccTLD(country code Top Level Domain) - .kr, .us, .uk, .tv 등 각국의 NIC(네트워크 정보 세터)에서 운영. 한국인터넷진흥원(KISA)가 레지스트리.
- DNS 의 IP 변경은 분산된 캐시 DNS서버들의 캐시 시간이 길게는 하루까지도 갈수 있으므로 그 시간을 조절하거나 유의해야함.
- 쿠키 - 웹사이트를 열람한 사용자 정보를 클라이언트가 보관하고, 두 번째 액세스부터는 클라이언트가 서버로 보내서 사용자를 식별하고 브라우징 특성에 맞는 광고 제공, 사이트 기능 설정을 통한 웹사이트의 편의성 제공.
- 세션 - 쿠키에 포함되어 주고받는 서버에서 발급한 사용자 식별ID, 세션 변수로 구성됨.
- Active Directory(AD)
    - Microsoft에서 개발한 디렉터리 서비스로 기업 네트워크 환경의 모든 리소스(계정, 컴퓨터, 그룹, 공유, 프린터 등등)에 대한 정보를 중앙 집중식으로 관리. LDAP 프로토콜을 사용.
- LDAP(Lightweight Directory Access Protocol)
    - 인터넷 프로토콜(IP)를 통해 분산된 디렉터리 서비스의 정보에 접근하고 유지관리 하기 위한 개방형 표준 응용 프로그램 프로토콜.
- HTTP
    - HTTP/0.9 - 1990년에 만들어져 ‘요청 하나에 응답 하나’.
    - HTTP/1.1 - 1997년에 만들어져 가장 널리 쓰이며 동시에 복수의 요청이 가능하나 ‘요청 하나에 응답 하나’는 유지되어 파일 하나마다 GET 요청 보내야 함. 따라서 동시에 요청시 커넥션이 많이 필요하고 많은 리소스를 가진 페이지 로딩이 오래걸림.
    - HTTP/2 - 커넥션 하나로 복수의 콘텐츠 전송. TLS로 암호화된 h2 통신과 평문 h2c 통신이 규정되어 있지만 브라우저들도 h2만 지원하고 아파치, 엔진엑스 등도 리버스 프록시와 웹서버 사이에서만 h2c로 평문 HTTP/2를 주고받는 것을 고려했다고 볼수 있음.
- Ajax
    - 이미 읽은 웹페이지에서 다시 요청시 웹페이지 전환없이 데이터를 송수신함. 이를 위해 비동기  XMLHttpRequest 기술을 사용하는데, 여기서 양방향이 어려운 문제점을 개선한 WebSocket이라는 기술로 발전함.

# 4장. 네트워크 장비의 종류

- 라우터 - 여러 단말기를 외부 네트워크와 연결하고 DHCP를 통해 IP 주소를 할당해서 충돌 관리.
- 스위치 - L7스위치의 경우는 백엔드의 여러 서버 중 하나와 세션을 유지하는 기능도 가능.
- 방화벽
    - 방화벽 - 3/4 계층 수준 방어
    - IDS/IPS - 좀 더 애플리케이션에 가까운 방어
    - WAF - 웹 어플리케이션에 특화된 방화벽
    - UTM - 그전까지 개별 기능들을 통합. WAF가 주로 포함되지는 않음.

# 5장. 인터넷 서비스의 기반

- 클라우드
    - IaaS - 서버, 스토리지, 네트워크, 가상화 등 제공.(AWS EC2, Google Compute Engine)
    - PaaS - IaaS에 더해서 OS, 미들웨어, 개발도구 제공 등 코드만 업로드하면 배포/실행(Google App Engine, Heroku, Azure App Service)
    - SaaS - 소프트웨어를 다이렉트로 이용만 하면 됨.(Gmail, Slack, Zoom)

# 6장. 네트워크 설계와 구축

- IP
    - A class(0xxx xxxx) - 1옥텟만 네트워크로 사용해서 128개 네트워크지만 실제로는 0과 127을 제외한 126개, 호스트 수는 약 1670만개(2^24 -2). 대규모
    - B class(10xx xxxx) - 2옥텟을 네트워크로 사용해서 네트워크 약 16,380개, 호스트는 65,000개. 중규모
    - C class(110x xxxx) - 3옥텟을 네트워크로 사용해서 네트워크 약 210만개, 호스트는 254개. 소규모
    - D class(1110 xxxx) - 멀티캐스트용
    - E class(1111 xxxx) - 연구, 실험용으로 예약됨
- 대칭키 - 암호화/복호화에 같은 키 사용. 키를 안전하게 교환하기 어려움.
- 공개키 - 암호화에 공개키, 복호화에 비밀키 사용.
- SSL/TLS 암호화 - 서버가 클라이언트에 공개키를 보내고, 클라이언트가 공개키로 암호화한 대칭키를 보내면, 서버는 공개키에 대응하는 비밀키로 복호화 한 대칭키를 통신에 계속 사용. 이때 인증정보나 공개키 정보를 모은 SSL/TLS 서버 인증서를 클라이언트로 건네줌.
- 왜 공개키 방식으로 계속 통신하지 않는가?
    - RSA 방식으로는 수백 byte까지만 암호화가 가능함.
    - RSA 방식은 지수/곱셈 연산을 큰 소수로 하는 작업이라 CPU부하가 크고 AES 같은 대칭키 방식은 블록 단위로 빠르게 암호화 가능함.
    - 공개키를 계속 쓰면 키 유출시 과거 메세지도 복호화 할수있게 됨.
    - 최신 TLS 1.3은 세션마다 새로운 대칭키를 생성해서 보안성 높임.
- 상시 SSL/TLS화(웹사이트 HTTPS화) - HTTP/2에서는 오히려 빠를수 있고, SEO의 장점이 있으며, HTTP 사이트의 웹브라우저 경고가 안뜨는 장점이 있음.
- SEO(Search Engine Optimization) - 검색에서 웹사이트가 좀더 상위에 표시되게 하는 일련의 대책. 구글이 검색엔진 점유율이 높고, 구글은 HTTPS가 적용된 사이트를 검색 결과 평가에서 높게 쳐줌.
- 부하 분산
    - DNS 라운드로빈 - 한 호스트에 IP주소를 여러게 설정하면 DNS 서버가 IP주소를 차례대로 반환함. 다운된 서버나 처리 능력이 저하된 서버 IP도 반환 될 수 있음.
    - NAT - 가상 IP에 대한 요청을 여러 서버로 분산. 일반 로드밸런서(L4/L7)에 사용.
- GSLB - 물리적으로 떨어진 곳의 서버들로 부하를 분산시키는 방식.
- 프록시 서버 - 클라이언트의 요청을 받아 대신 요청함. 캐싱.
- 리버스 프록시 서버 - 서버가 받을 응답을 대신 먼저 받음. 캐싱/부하분산/WAF7 기능.
- CDN - 동일한 콘텐츠를 많은 배포처에 배포할때 유리함. 에지 서버들이 오리지널 서버에서 가져온 데이터를 캐싱함. DDoS 공격을 분산시키는 역할도 함.(Akamai, Amazon CloudFront, Cloudflare)

# 7장. 네트워크 운영과 보안

- 방화벽 패킷 허용/차단 순서가 중요하며, 허용이 앞에 있으면 뒤에 차단하는 규칙은 효력이 없음. 그리고 제일 마지막 규칙은 앞의 규칙에서 통과되지 못한 모든 패킷은 거부하는게 보통임.
- AWS EC2 보안 그룹은 내부에서 발신한 통신에 대한 응답을 체크하는 상태 기반 패킷 검사 방식이라서, 동적 패킷 필터링에 의해 자동으로 패킷이 허용되는 방식임.
- DMZ - 내부 네트워크와 분리된 공간으로서, DMZ에 공개서버를 설치해서 해킹을 당하더라도 내부 네트워크를 보호 할 수 있음.
- SIEM(Security Information and Event Management) - 다양한 네트워크 장비나 소프트웨어의 로그를 일원적으로 실시간 축적, 관리하고 의심상황을 감지하여 관리자에게 통보하는 소프트웨어.
- 모니터링 소프트웨어 - Zabbix, Nagios, munin, Prometheus, Elasticsearch, Grafana, Mackerel