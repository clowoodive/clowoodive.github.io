---
title: "[Etc] Notion(노션)의 본문 검색 결과가 원하는 대로 나오지 않을 때"
excerpt: ""

categories:
  - Etc
tags:
  - Notion
last_modified_at: 2023-09-06T00:00:00
---

{% capture notice-env %}
#### Environment
 - Notion Windows Version
{% endcapture %}
<div class="notice--primary">{{ notice-env | markdownify }}</div>


노션에서 검색기능으로 원하는 결과가 안 나올 때가 많아서 검색 때문에 메모 앱을 바꿀까 하고 심각하게 고민을 했다.

업노트, 에버노트 등등의 기능도 검색해보고 다시 돌아가야 하나…

메모 앱 간에 마이그레이션/import 기능이 있지만, 이 기능을 쓰다가 문서가 깨져서 날려먹은 적이 있어서 노션을 계속 쓰고자 검색 기능을 이리저리 확인해 봤다.

단, 아래 사항들을 전제로 한다.

- 제목 검색은 잘 되는 편이고 제목이 아닌 Markdown으로 된 본문 내용 검색이 원하는 대로 되지 않는 것에 대한 것임.
- 검색해서 나오는 결과 목록에서 같은 페이지에 있는 단어의 검색이 직관적으로 노출되지 않는 것에 대한 내용임.

# 1. 테스트용 텍스트

먼저 아래와 같이 테스트 페이지에 일반 markdown 내용을 넣어놓고 Ctrl + P 로 검색을 해봤다.(참고로 맨 앞의 숫자는 이해를 돕기 위해 본 글에서만 삽입 한 것임)

```
(1) 핫핑크

(2) 블랙핑크

(3) 색은 핫핑크

(4) 가수는 블랙핑크

(5) 중간에 그린핑크도 껴넣어볼까?

(6) 모두 블랙핑크 그린핑크 레드핑크

(7) 유명한 블랙핑크와 뜨거운 핫핑크네

(8) 예쁜 핫핑크 아름다운 블랙핑크

(9) 옐로컬러굿

(10) 노란 옐로컬러

(11) 옐로컬러
```

<br>

<br>

# 2. 테스트

## 2.1. 검색 단어 일치가 아닌 검색 단어의 부분 집합이 많이 포함된 열이 노출

```
검색 : 핫핑크
예상 결과 : (1) 핫핑크
실제 결과 : (6) 모두 블랙핑크 그린핑크 레드핑크
```

```
검색 : 블랙핑크
예상 결과 : (2) 블랙핑크
실제 결과 : (6) 모두 블랙핑크 그린핑크 레드핑크
```

```
검색 : 핑크
예상 결과 : (1) 핫핑크
실제 결과 : (6) 모두 블랙핑크 그린핑크 레드핑크
```

```
검색 : 그린핑크
예상 결과 : (5) 중간에 그린핑크도 껴넣어볼까?
실제 결과 : (6) 모두 블랙핑크 그린핑크 레드핑크
```

위의 테스트로 보면 다른 옵션을 변경하지 않은 검색 조건에서 정확한 단어를 찾는다기 보다

한 줄에 검색 단어의 부분집합(핑크)이 많으면 출력한다는 것을 유추 할 수 있다.

## 2.2. 공백으로 구분된 단어 전체 일치가 우선?

```
검색 : 옐로
예상 결과 : (9) 옐로컬러굿
실제 결과 : (9) 옐로컬러굿
```

```
검색 : 옐로컬러
예상 결과 : (10) 노란 옐로컬러
실제 결과 : (10) 노란 옐로컬러
```

```
검색 : 옐로컬러굿
예상 결과 : (9) 옐로컬러굿
실제 결과 : (11) 옐로컬러
```

첫 번째와 두 번째 테스트에서는 예상대로 검색한 단어가 일치하는 최상단 텍스트가 검색되었는데, 세 번째 테스트에서는 `옐로컬러굿` 이 있음에도 더 아래의 `옐로컬러` 를 노출한다.

<br>

<br>

# 3. 추천 방안

위의 두 가지 테스트 케이스로 알아낸 알고리즘 말고도 더 많은 알고리즘이 있고, 그 알고리즘들의 검색 우선순위가 있을텐데 모두를 알아내서 방법을 찾기란 쉽지 않다.

***그래서 제안하는 방법은 검색 단어를 “”로 감싸고, 정렬 옵션을 `결과 상위 일치` 가 아닌 다른 옵션으로 변경하는 것이다.***

이렇게 하면 검색 단어와 일치하는 단어가 공백으로 구분되어 있다면 정확하게 검색이 된다.

예를들면 아래와 같이 “그린핑크” 검색 시 그린핑크 단어는 `(5) 중간에 그린핑크도 껴넣어볼까?` 에 먼저 포함되어 있지만 단어 단위로 일치하는 (6) 번 텍스트가 검색된다.

```
검색 : "그린핑크"
예상 결과 : (5) 중간에 그린핑크도 껴넣어볼까?
실제 결과 : (6) 모두 블랙핑크 그린핑크 레드핑크
```

검색 단어에 조사가 합쳐진 어절이 먼저 검색되진 않지만  ***“공백으로 구분되어 있는 일치하는 단어가 검색된다”*** 라는 규칙은 쉽게 이해 할 수 있다. 사실 이 검색 결과는 최초 확인 단계에서의 테스트와 결과는 같지만 확인 단계의 기준은 “핑크” 단어가 많이 포함되는 줄을 노출하는 것이 기준이라는 점에서 차이가 있다.

그리고  정렬 옵션을 변경하는 이유는 아래 처럼 검색된 텍스트가 표시가 안되기 때문이다.

- 정렬 옵션 -  결과 상위 일치(기본값)

![etc-notion-search1]({{ '/assets/images/etc-notion-search1.png' | relative_url }}){: .align-center}

- 정렬 옵션 - 최종 편집: 오래된 순

![etc-notion-search1]({{ '/assets/images/etc-notion-search2.png' | relative_url }}){: .align-center}

위와 같이 기본 옵션에서는 단어가 포함된 페이지만 알 수 있고, 검색된 텍스트 줄은 표시되지 않는다.

이 방식을 쓰면 앞서 확인해 본 “옐로컬러굿”의 검색 결과를 제대로 찾을 수 있다.

![etc-notion-search1]({{ '/assets/images/etc-notion-search3.png' | relative_url }}){: .align-center}

참고로 모바일 앱에서는 결과가 또 조금 다르다. 😟

<br>

<br>

# 4. 정리

개인적으로는 검색한 단어와 일치하는 텍스트를 모두 보여주는게 직관적이라고 생각하고, 이게 안된다면 단어검색 우선과 같은 여러 옵션들이 있었으면 하는 바램이다.

“”와 같은 방식을 필요로 하는 것은 검색으로 분노를 유발 했던 Outlook이 떠올라서 트라우마가 떠오른다.

노션 검색 알고리즘이 나만 불편했을 수도 있고, 이 방법이 완벽한 것은 아니지만 혹시나 나처럼 검색 때문에 메모 앱 변경을 고민한 사람에게 도움이 되기를 바란다.